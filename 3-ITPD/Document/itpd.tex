\documentclass[11pt,a4paper]{report}

%INPUT of SETTINGS (usepackage, styles, new command,...)
\input{itpd_prefs}

%-------------------------------------------------------------------------
%   START DOCUMENT 
%-------------------------------------------------------------------------
\begin{document}

% INPUT OF TITLE PAGE
\input{itpd_titlepage}

%-------------------------------------------------------------------------
%   TOC
%-------------------------------------------------------------------------
%\pagestyle{plain}
\pagenumbering{roman}
\thispagestyle{empty}
\tableofcontents
\listoffigures
\cleardoublepage
\pagenumbering{arabic}
\pagestyle{fancy}

%--------------------------------------------------------------------
%  BEGIN TEXT
%--------------------------------------------------------------------
\chapter{Introduction}
\section{Revision History}
%Record all revisions to the document
\section{Purpose and Scope}
\section{List of Definitions and Abbreviations}
\begin{description}
	\item[PowerEnJoy]is the name of the system that has to be developed.
	\item[System]sometimes called also \textit{system-to-be}, represents the application that will be described and implemented.
	In particular, its structure and implementation will be explained in the following documents. People that will use the car-sharing service will interact with it, via some interfaces, in order to complete some operations (e.g.: reservation and renting).
	\item[Renting]it is the act of picking-up an available car and of starting to drive.
	\item[Ride] the event of picking-up a car, driving through the city and parking it. Every Ride is associated to a single user and to a single car.
	\item[Reservation]it is the action of booking an available car.
	\item[Car] a car is an electrical vehicle that will be used by a registered user.
	\item[Not Registered User] indicates a person who hasn't registered to the system yet; for this reason he can't access to any of the offered function. The only possible action that he can carry out is the registration to get a personal account.
	\item[Registered User] interacts with the system to use the sharing service. He has an account (which contains personal information, driving license number and payment data) that must be used to access to the application in order to exploit all the functionalities.
	\item[Employee] it's a person who works for the company, whose main task is to plug into the power grid those cars that haven't been plugged in by the users. He is also in charge of taking care of the status of the cars and of moving the vehicles from a safe area to a charging area and vice versa if needed.
	\item[Safe Area] indicates a set of parking lots where the users have to leave the car at the end of the rent; the set of the Safe Areas is pre-defined by the system management. These areas are spread all over the city.
	\item[Plug] defines the electrical component that physically connects the car to the power grid.
	\item[Charging Area] is a special \textit{Safe Area} that also provides a certain number of plugs that connect the cars to the power grid in order to recharge the battery.
	\item[Registration] the procedure that an unregistered user has to perform to become a registered user. At the end, the unregistered user will have an account. To complete this operation three different types of data are required: personal information, driving license number and payment info.
	\item[Search] this functionality lets the registered user search for available cars within a certain range from his/her current position or from a specified address.
	\item[RASD] is the acronym of \textit{Requirements Analysis and Specification Document}
	\item[DD] is the acronym of \textit{Design Document}
	\item[ITPD] is the acronym of \textit{Integration Test Plan Document}
\end{description}
\section{List of Reference Documents}
	\begin{itemize}
		\item Project Assignments 2016-2017
		\item RASD v1.1
		\item DD v1.0
		%TODO documentation of used tools
	\end{itemize}
\chapter{Integration Strategy}
\section{Entry Criteria}
%Specify the criteria that must be met before integration testing of specific elements may begin (e.g., functions must have been unit tested).
\section{Elements to be Integrated}
%Identify the components to be integrated, refer to your design document to identify
% such components in a way that is consistent with your design.
In order to build the full \textit{PowerEnJoy} system all its components have to be properly integrated. In this section the focus is on which components are selected and how these are aggregated.\\Let us consider the component diagram of the \textit{Design Document} to refer to the components to be integrated. For the integration testing purpose it is useful to organize the components into logical \textbf{Macro Areas} that will support the testing process as explained in the \textit{Integration Test Strategy} section:
\begin{itemize}
\item \textbf{Input Area} includes \textit{ViewRender} and \textit{Dispatcher} components. This pair of modules should be tested together to ensure that all input requests are properly received by the system.
\item \textbf{Management Area} includes the \textit{ReservationManager}, the \textit{RegistrationManager}, the \textit{StateManager}, the \textit{LoginManager}, the \textit{MapController}, the \textit{RideManager}, the \textit{ServerCommunicationManager} and the \textit{Dispatcher}. These modules are responsible for the business logic of the application and consequently should be tested together.
\item \textbf{Render Area} is the set made of the \textit{ViewRender} and of the \textit{ReservationManager}, the \textit{RegistrationManager}, the \textit{StateManager}, the \textit{LoginManager}, the \textit{MapController}, the \textit{RideManager}. This logical area has to be tested in order to ensure that all managers can update the view of the application without bugs.
\item \textbf{Ride Area} includes \textit{RideManager},  \textit{MapController}, \textit{RideCostCalculator} and \textit{PaymentManager}. The tests on this area is crucial because it is responsible of the costs computation and of the payment process.
\item \textbf{Data Area} is the group of components that deal with the \textit{Model} and the external \textit{DBMS}. This is made of the \textit{Model} itself and of the \textit{ReservationManager}, the \textit{RegistrationManager}, the \textit{StateManager}, the \textit{LoginManager}, the \textit{MapController}, the \textit{RideManager}. Tests in this area aims at verifying the correctness of data through the various operations that the system has to perform on them.
\item \textbf{CarCommunication Area} is the pair of \textit{ServerCommunicationManager}and \textit{CarCommunicationManager}. Here the tests have to ensure that flow of information in both directions is feasible and consistent.
\item \textbf{Car Area} is the logical set of components that have to be tested on the car. \textit{CarCommunicationManager}, \textit{CentralUnit} and \textit{ScreenManager} are part of the Built-in sw for the car. 
\end{itemize}
Please note that the given groupings do not represent a partition of the set of components of the system (some components are shared by more than one macro area) but just a logical division that is convenient to carry out the integration testing. 
Finally, a remark on the external components (\textit{MapService}, \textit{Payment System} and \textit{DBMS}): they are already available for integration testing and they only require a sufficient level of completion of the internal components to be actually tested.
\section{Integration Test Strategy}
%Describe the integration testing approach (top-down, bottom-up, functional groupings,
%etc.) and the rationale for the choosing that approach.
The integration testing process will be carried out with both bottom-up and threads approaches. In particular, the bottom-up testing will be executed between modules that belong to the same macro area (as defined in the \textit{Elements to be Integrated} section) throughout their development process while the threads analysis will be eventually performed among modules of different areas when the previous internal tests are successfully passed.
This testing strategy is incremental by construction because it follows the the development of the components and consequently it makes it easier to spot possible errors during the implementation. As portions of components are added to the existing ones, the integration testing will be triggered on the new parts making use of suitable drivers in order to simulate the calls from one caller component to the called one that has to be tested.
This continuous iteration of the bottom-up approach guarantees the testing coverage of the all the possible interactions of the components.
As previously mentioned, a thread analysis has to be performed too. This testing phase aims at verifying that the chains of function calls among components of different macro areas produce correct actions. The threads testing approach is chosen because it simulates the standard behaviour of the system, in terms of user requests. It could be considered a means to study the system performances too in this sense.
A final remark on the external components: the \textbf{MapService}, the \textbf{Payment System} and the \textbf{DBMS} components are already fully developed and in a bottom-up perspective they can be tested immediately using the corresponding system components as proper drivers. 
\section{Sequence of Component/Function Integration}
%NOTE: The structure of this section may vary depending on the integration strategy you select in Section 2.3; use the structure proposed below as a non mandatory guide
\subsection{Software Integration Sequence}
%For each subsystem, identify the sequence in which the software components will be integrated within the subsystem; relate this sequence to any product features that are being built up.
\subsection{Subsystem Integration Sequence}
%Identify the order in which subsystems will be integrated; if you have a single subsystem, 2.4.1 and 2.4.2 are to be merged in a single section.
\chapter{Individual Steps and Test Description}
This section focuses on the interactions between pairs of components that will be progressively integrated. For each pair, a set of tests about the  function calls from one component to the other one is provided. This kind of test should cover all the possible calls in order to spot any type of undesirable behaviours just in time. For this reason, each function invocation is here evaluated many times under different circumstances depending on the actual values of the input parameters. Finally, for each such call the desired output is stated.
This integration test phase will be organized according to the logical areas division shown in the \textit{Elements to be Integrated} section.
\subsection{BLUE MACRO}
\subsubsection{Dispatcher$\,\to\,$ReservationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ManageNewReservation(username, car)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & The reservation shows the confirmation\\
	\hline 
\end{tabularx}
\subsubsection{Dispatcher$\,\to\,$ReservationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{DeleteReservation(username, reservationID)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & The reservation shows a webpage with a confirmation message.\\ 
	\hline
\end{tabularx}
\subsection{YELLOW MACRO}
\subsubsection{ViewRender$\,\to\,$Dispatcher}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{DispatchRequest(ReserveRequest)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & Request is dispatched to other components\\
	\hline
\end{tabularx}
\subsubsection{ViewRender$\,\to\,$Dispatcher}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{PickUpACar(Username, Car)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known &  The ViewRender calls the suitable interface of the Dispatcher passing to it the input data\\
	\hline
\end{tabularx}
\subsubsection{Device$\,\to\,$ViewRender}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ReserveACar(username, car)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null Parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumetException\\
	\hline
	Car and username are known & The car is going to be reserved\\
	\hline
\end{tabularx}
\subsubsection{ViewRender$\,\to\,$Dispatcher}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ChangeCarState(Car, NewState)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & It permits to update the status of the indicated car with the new state\\
	\hline
\end{tabularx}
\subsection{RED MACRO}
\subsubsection{RideManager$\,\to\,$PaymentManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{CheckBalance(userID)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & User's account is check in order to has his balance\\
	\hline
\end{tabularx}
\subsubsection{RideManager$\,\to\,$MapController}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{SearchSuggestedArea(FinalDestination)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & The user is given the positions of the suggested areas where to park the car, which are computed starting from the final destination of the ride inserted by the user\\
	\hline
\end{tabularx}
\subsubsection{RideManager$\,\to\,$RideCostCalculator}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{CalculateCost(PeopleOnBoard,Position,Batterylevel)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & It computes the total cost of the ride starting from the following input parameters: the number of people on board, the final position of the car, the final battery charge level and a flag that tells whether the user has plugged the car into the power grid at the end of the ride\\
	\hline
\end{tabularx}
\subsubsection{RideManager$\,\to\,$MapController}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ChechPositon(MyPosition))}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter &  At the end of each ride, the system must check the final position of the car\\
	\hline
\end{tabularx}
\subsection{PURPLE MACRO}
\subsubsection{ServerCommunicationManager$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ReceiveReservation(ExpiringTime)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter &  It receives the reservation and the expiring time for it\\
	\hline
\end{tabularx}
\subsubsection{CarCommunicationManager$\,\to\,$ServerCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{ReceiveRideStart(SaveMoneyOPT,FinalDest)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known &  The system has successfully completed all the checks and the tasks about the start of the ride; this will communicate the CentralUnit that it must prepare the car to start\\
	\hline
\end{tabularx}
\subsubsection{ServerCommunicationManager$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{CommunicateParkArea(AreaPosition)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It communicates to the car the predefined position of the area where the user can park\\
	\hline
\end{tabularx}
\subsubsection{CarCommunicationManager$\,\to\,$ServerCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{RideStop(CarID,PeopleOnBoard,Position,BatteryLevel)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & It communicates that the user has ended the ride. All the information collected in the car are encapsulated in a proper request that will be handled by the Dispatcher\\
	\hline
\end{tabularx}
\subsubsection{ServerCommunicationManager$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{SendCost(Cost)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It sends to the car the computed cost of the ride that is passed as input\\
	\hline
\end{tabularx}
\subsubsection{CarCommunicationManager$\,\to\,$ServerCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{SendPlugInTimeout(PluggedIn)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It indicates if the user has plugged the car into the power grid\\
	\hline
\end{tabularx}
\subsection{LIGHT BLUE}
\subsubsection{CentralUnit$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{SendBackRideStart(SaveMoneyOpt,FinalDestination)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & It sends back to the system the preferences indicated by the user through the on board screen; in particular, the preferences cover the possibility that the user has enabled the money saving option and the final destination of the ride.\\
	\hline
\end{tabularx}
\subsubsection{CarCommunicationManager$\,\to\,$CentralUnit}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{StoreParkPosition(AreaPosition)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It stores into the car memory the position of the area where the user can park; this position will be displayed by the ScreenManager\\
	\hline
\end{tabularx}
\subsubsection{CentralUnit$\,\to\,$ServerCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{DisplayParkPosition(Position)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It displays on the screen the position on the map where the user can park to obtain special discount\\
	\hline
\end{tabularx}
\subsubsection{CentralUnit$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{HandleStop(CarID,PeopleOnBoard,Position,BatteryLevel)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	Parameters are known & It receives from the CentralUnit all the data the have to be passed the to system in order to properly manage the end of the ride\\
	\hline
\end{tabularx}
\subsubsection{CentralUnit$\,\to\,$CarCommunicationManager}
\begin{tabularx}{\textwidth}{|X|X|}
	\hline
	\multicolumn{2}{|c|}{\textbf{PlugInTimeout(PluggedIn)}}\\
	\hline
	\textit{Input} & \textit{Result}\\
	\hline
	A null parameter & NullArgumentException\\
	\hline
	An empty or unknown parameter & InvalidArgumentException\\
	\hline
	A known parameter & It is triggered when the time that the user has to get out of the car and to plug it into the power grid has expired\\
	\hline
\end{tabularx}
%For each step of the integration process above, describe the type of tests that will be used to verify that the elements integrated in this step perform as expected. Describe in general the expected results of the test set. You may refer to Chapter 3 and Chapter 4 of the test plan example [1] as an example of what we expect.
%(NOTE: This is not a detailed description of test protocols. Think of this as the test design phase. Specific protocols will be written to fulfill the goals of the tests in this section.)
\chapter{Tools and Test Equipment Required}
%Identify all tools and test equipment needed to accomplish the integration. Refer to the tools presented during the lectures. Explain why and how you are going to use them.
%Note that you may also use manual testing for some part. Consider manual testing as one of the possible tools you have available.
\chapter{Program Stubs and Test Data Required}
%Based on the testing strategy and test design, identify any program stubs or special test data required for each integration step.
\chapter{Effort Spent}
%-------------------------------------------------------------------------
%   END DOCUMENT
%-------------------------------------------------------------------------
\end{document} 